<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">

		<style>
			/* General Styles */
			.reveal .slides section {
				padding: 20px;
				display: grid;
				grid-template-rows: auto 1fr;
				align-items: start;
				height: 100vh;
			}

			/* Title Styling */
			.reveal .slides section h2, .reveal .slides section h3 {
				font-family: 'Arial', sans-serif;
				font-weight: bold;
				text-transform: uppercase;
				color: #fff;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
				margin-bottom: 15px;
			}

			/* Section Header for Main Titles */
			.reveal .slides section h2 {
				font-size: 2.5rem; /* Larger title font size */
				border-bottom: 2px solid #fff;
				padding-bottom: 10px;
			}

			/* Smaller Section Headers for Subtitles */
			.reveal .slides section h3 {
				font-size: 2rem;
				color: #fff;
			}

			/* Slide Content */
			.reveal .slides section p, .reveal .slides section ul {
				font-size: 1.2rem;
				color: #fff;
				line-height: 1.5;
			}

			/* Code Style */
			#first-launch pre code {
				font-size: 1rem;
				line-height: 1.4;
				white-space: pre-wrap;
				word-wrap: break-word;
			}

			/* Specific Slide Layouts */
			#first-launch {
				display: grid;
				grid-template-rows: auto 1fr;
				align-items: start;
				height: 100vh;
			}
			
			#code-slide pre code {
				font-size: 0.8rem; /* Smaller code font for readability */
				max-height: 100vh;
				line-height: 1.2;
			}

			/* General Image Styling */
			.reveal .slides section img {
				max-width: 100%;
				border-radius: 8px;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>–ö–∞—Ç–∏–º Detekt –≤ –ø—Ä–æ–µ–∫—Ç</h2>
					<img src="assets/mem.png" alt="–ë–µ—Å–ø–æ—Ä—è–¥–æ–∫ –≤ –∫–æ–¥–µ">
					<p>Directed by Sutugin Alexander</p>
				</section>

				<section>
					<h3>–ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –∫–æ–¥–∞?</h3>
					<p>–ß—Ç–æ–±—ã –∫–æ–¥ –Ω–µ –≤—ã–≥–ª—è–¥–µ–ª —Ç–∞–∫:</p>
					<img src="assets/bad_code.png" alt="–ë–µ—Å–ø–æ—Ä—è–¥–æ–∫ –≤ –∫–æ–¥–µ">
				</section>

				<section>
					<h2>–í—ã–±–æ—Ä Linter-a</h2>
					<img src="assets/1706896983254.png" alt="–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–∏–Ω—Ç–µ—Ä–æ–≤">
				</section>

				<section id="first-launch">
					<h2>–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫</h2>
					<pre>
						<code data-trim data-noescape>
							# –í–∫–ª—é—á–∞–µ–º Detekt –≤ Gradle
							plugins {
								id "io.gitlab.arturbosch.detekt" version "1.23.0"
							}
							
							detekt {
								config = files("detekt.yml")
							}
						</code>
					</pre>
				</section>

				<section>
					<h2>–ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</h2>
					<p> –ê –ø–æ—Ç–æ–º Detekt —Å–∫–∞–∑–∞–ª ...</p>
					<img id ="first_detekt" src="assets/conflicts_detekt.png" alt="–û—à–∏–±–∫–∞ Detekt" height="60%" >
					<p> –ò —ç—Ç–æ –ª–∏—à—å 1/40 —Ç–æ–≥–æ —á—Ç–æ –æ–Ω –≤—ã–¥–∞–ª ...</p>

				</section>

				<section>
					<h2>–ü–æ–¥–∫–ª—é—á–∞–µ–º Detekt</h2>
					<img src="assets/base_settings.png" alt="–û—à–∏–±–∫–∞ Detekt">
				</section>

				<section>
					<h2>–°–æ–∑–¥–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞. Provider</h2>
					<img src="assets/provider.png" alt="–û—à–∏–±–∫–∞ Detekt">
				</section>

				<section>
					<h2>–°–æ–∑–¥–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞. Rule</h2>
					<div style="display: flex; justify-content: space-between; gap: 20px;">
						<pre style="width: 38%; font-size: 0.3em;">
							<code>
class TrailingCommaRule(config: Config = Config.empty) : Rule(config) {

	override val issue = Issue(
		id = this.javaClass.simpleName,
		severity = Severity.Style,
		description = "Checks for correct trailing comma usage.",
		debt = Debt.FIVE_MINS
	)

	override fun visitKtFile(file: KtFile) {
		super.visitKtFile(file)
		file.accept(TrailingCommaVisitor(this))
	}
}
							</code>
						</pre>
						<pre style="width: 60%; font-size: 0.3em;">
							<code>
class TrailingCommaVisitor(private val rule: Rule) : KtVisitorVoid() {

	override fun visitValueArgumentList(list: KtValueArgumentList) {
		checkTrailingComma(list)
		super.visitValueArgumentList(list)
	}

	override fun visitParameterList(list: KtParameterList) {
		checkTrailingComma(list)
		super.visitParameterList(list)
	}

	override fun visitCollectionLiteralExpression(expression: KtCollectionLiteralExpression) {
		checkTrailingComma(expression)
		super.visitCollectionLiteralExpression(expression)
	}

	private fun checkTrailingComma(element: PsiElement) {
        val lastChild = element.lastChildIgnoringWhitespaceAndComments
        val hasTrailingComma = lastChild?.node?.elementType == KtTokens.COMMA

        val shouldHaveTrailingComma = when (element) {
            is KtValueArgumentList -> element.arguments.size > 1
            is KtParameterList -> element.parameters.size > 1
            is KtCollectionLiteralExpression -> element.getInnerExpressions().size > 1
            is KtEnumEntry -> true
            else -> false
        }

        if (shouldHaveTrailingComma && !hasTrailingComma) {
            rule.report(
                CorrectableCodeSmell(
                    rule.issue,
                    Entity.from(element),
                    "Missing trailing comma",
                    autoCorrect = true
                ) {
                    val psiFactory = KtPsiFactory(element.project)
                    val comma = psiFactory.createComma()
                    element.add(comma)
                }
            )
        } else if (!shouldHaveTrailingComma && hasTrailingComma) {
            rule.report(
                CorrectableCodeSmell(
                    rule.issue,
                    Entity.from(lastChild!!),
                    "Unnecessary trailing comma",
                    autoCorrect = true
                ) {
                    lastChild.delete()
                }
            )
        }
    }
}
							</code>
						</pre>
					</div>
				</section>

				<section>
					<h2>–°–æ–∑–¥–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h2>
					<div style="display: flex; align-items: center; gap: 20px;">
						<div style="text-align: center;">
							<img src="assets/local_config.png" alt="–û—à–∏–±–∫–∞ Detekt" width="130%" >
							<p>local config</p>
						</div>
						<div style="text-align: center;">
							<img src="assets/global_config.png" alt="–û—à–∏–±–∫–∞ Detekt" width="70%">
							<p>global config</p>
						</div>
					</div>
					<div style="text-align: center; margin-top: 20px;">
						<img src="assets/rule_set_provider_link.png" alt="–û—à–∏–±–∫–∞ Detekt" width="80%">
						<p>io.gitlab.arturbosch.detekt.api.RuleSetProvider</p>
					</div>
				</section>
				

				<section>
					<h2>–°–æ–∑–¥–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞. –°—Ç—Ä—É–∫—Ç—É—Ä–∞</h2>
					<img src="assets/custom_rules_structure.png" alt="–û—à–∏–±–∫–∞ Detekt">
				</section>

				<section>
					<h2>–õ–µ–∑–µ–º –ø–æ–¥ –∫–∞–ø–æ—Ç</h2>
					<pre>
						<code>
try {
	riskyOperation()
} catch (e: Exception) { }
						</code>
					</pre>
				</section>

				<section>
					<h2>–õ–µ–∑–µ–º –ø–æ–¥ –∫–∞–ø–æ—Ç. PSI –¥–µ—Ä–µ–≤–æ</h2>
					<pre>
						<code>
KtTryExpression (try { riskyOperation() } catch (e: Exception) { })
‚îú‚îÄ‚îÄ KtBlockExpression ({ riskyOperation() })
‚îÇ   ‚îî‚îÄ‚îÄ KtCallExpression (riskyOperation())
‚îÇ       ‚îú‚îÄ‚îÄ KtNameReferenceExpression (riskyOperation)
‚îú‚îÄ‚îÄ KtCatchClause (catch (e: Exception) { })
‚îÇ   ‚îú‚îÄ‚îÄ KtParameter (e: Exception)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KtNameReferenceExpression (Exception)
‚îÇ   ‚îú‚îÄ‚îÄ KtBlockExpression ({ })

						</code>
					</pre>
				</section>

				<section>
					<h2>–õ–µ–∑–µ–º –ø–æ–¥ –∫–∞–ø–æ—Ç. –û–±—Ö–æ–¥ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º</h2>
					<pre>
						<code>
class EmptyCatchBlock(config: Config) : Rule(config) {
	override fun visitTryExpression(expression: KtTryExpression) {
		expression.catchClauses.forEach { catchClause ->
			val catchBody = catchClause.catchBody
			if (catchBody?.children?.isEmpty() == true) {
				report(
					CodeSmell(
						issue,
						Entity.from(catchClause),
						"–ü—É—Å—Ç–æ–π –±–ª–æ–∫ catch"
					)
				)
			}
		}
	}
}
						</code>
					</pre>
				</section>
				

				<section>
					<h2>–†–∞–±–æ—Ç–∞ —Å –ø—Ä–µ—Ö—É–∫–∞–º–∏</h2>
					<img src="assets/prepush.png" alt="–û—à–∏–±–∫–∞ Detekt">
				</section>

				<section>
					<h2>detekt gradle plugin</h2>
					<img id="toggleImage" src="assets/download_ui_plugin.png" onclick="toggleImage()" maxHeight ="60%">
				</section>
				<script>
					function toggleImage() {
						let img = document.getElementById("toggleImage");
						img.src = img.src.includes("download_ui_plugin.png") 
							? "assets/detekt_plugin.png" 
							: "assets/download_ui_plugin.png";
					}
				</script>
				<section id="code-slide">
					<h2>–°–æ–µ–¥–µ–Ω—è–µ–º –±–µ–π–∑–ª–∞–π–Ω—ã</h2>
					<pre>
						<code data-trim data-noescape>
						task generateDetektBaseline {
							doLast {
								val baselineFile: File = file("$rootDir/config/detekt/detekt-baseline.xml")
								if (baselineFile.exists()) {
									baselineFile.delete()
								}
								baselineFile < < "<SmellBaseline>\n"
								subprojects.forEach { project -> 
									def projectBaselineFile : File = file ("$(project.projectDir]/detekt-baseline.xml")
									if (projectBaselineFile.exists()) {
										def lines : List < String > = projectBaselineFile.readLines()
										def content : List < String > = lines.subList(2, lines.size() - 1)
										baselineFile < < content . join ("\n") + "\n"
									}
								}
								baselineFile < < "</SmellBaseline>\n"
								println("Co–∑–¥–∞–Ω o–±—â–∏–π Baseline —Ñ–∞–π–ª –¥–ª—è Detekt plugin")
							}
						}	
						</code>
					</pre>
				</section>

				<section style="color: #fff; font-family: Arial, sans-serif; text-align: left; max-width: 800px; margin: auto;">
					<h2 style="border-bottom: 2px solid #555; padding-bottom: 10px;">–ü—Ä–æ–±–ª–µ–º—ã</h2>
					<p style="font-weight: bold;">–ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–µ—Ö—É–∫–∏</p>
					<p style="margin-left: 30px;">–†–µ—à–µ–Ω–∏–µ: –ü–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ–ø –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏ –Ω–∞ Jenkins-–µ</p>
					<p style="font-weight: bold;">–° —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã, —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è –±–µ–π–∑–ª–∞–π–Ω—ã</p>
					<p style="margin-left: 30px;">–†–µ—à–µ–Ω–∏–µ: –ò—Å–∫–ª—é—á–∞—Ç—å —Å–ª–∏—à–∫–æ–º –∂–µ—Å—Ç–æ–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞</p>
				</section>
				

				<section>
					<h2>–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º –≤ CI</h2>
					<p>–†–µ—à–µ–Ω–∏–µ: –†–∞—Å—à–∏—Ä—è–µ–º –ø–∞–π–ø–ª–∞–π–Ω, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º Detekt-a</p>
				</section>

				<section>
					<h2 style="text-align: center;">–í—ã–≤–æ–¥—ã</h2>
					<ul style="list-style: none; padding-left: 0; font-size: 1em; text-align: left;">
						<li>‚úÖ –ö–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ</li>
						<li>‚ö†Ô∏è –õ–∏–Ω—Ç–µ—Ä —Ä—É–≥–∞–µ—Ç—Å—è, –Ω–æ —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ</li>
						<li>üò© –ö–æ–º–∞–Ω–¥–∞ —Å—Ç—Ä–∞–¥–∞–µ—Ç, –Ω–æ –ø—Ä–∏–≤—ã–∫–∞–µ—Ç</li>
						<li>üëç –ù–∞ —Ä–µ–≤—å—é –Ω–∏–∫—Ç–æ –Ω–µ —Ä–∞–∑–Ω–æ—Å–∏—Ç –∑–∞ –∫–æ–¥-—Å—Ç–∞–π–ª</li>
					</ul>
				</section>

				

				<section>
					<h2>–í–æ–ø—Ä–æ—Å—ã?</h2>
					<img src="assets/questions.jpg" alt="–ö–æ–Ω–µ—Ü –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏">
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			Reveal.initialize({
				hash: true,
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
